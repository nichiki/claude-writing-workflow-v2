---
description: "対話的に記事の要件をヒアリング"
allowed-tools: LS, Write, Read
---

# 前提条件
- projectsディレクトリが存在すること（なければ作成）

# 実行内容

**重要: 必ず以下のステップ1から順番に実行してください。スキップせずに全てのステップを実行してください。**

## ステップ1: プロジェクトディレクトリの準備
最初にプロジェクトディレクトリを作成します。
!mkdir -p projects

## ステップ2: 現在日時を取得
日時を取得してプロジェクト名に使用します。
@.claude/commands/util/date.md

## ステップ3: 共通設定の確認

Claude Codeが以下の手順で設定プリセットを取得します：

1. `config/brief/`ディレクトリの.yamlファイルを検索
2. ファイル名から拡張子を除いてプリセット名を抽出
3. 利用可能なプリセット一覧を表示

Claude Codeが以下のように表示します：
- プリセットが存在する場合：番号付きリストで表示
- プリセットが存在しない場合：「プリセットが見つかりません」と表示

プリセット選択画面の例：
```
利用可能なプリセット：
1) business
2) tech
3) default

プリセットを選択してください：
0) プリセットを使わない
1-N) 上記の番号で選択
```

選択されたプリセットがある場合は読み込み、プリセットで指定されている項目はインタビューでスキップします。

**プリセットで設定される可能性がある項目**：
- target_length（目標文字数）
- target_audience（対象読者）
- tone（トーン）
- style_guide（スタイルガイド）
- purpose（記事の目的）

## ステップ4: インタビューセッション

記事作成のためのインタビューを開始します。
**重要**: 
1. 必ず一度に1つの質問のみ行い、回答を待ってから次の質問に進んでください。
2. プリセットで指定されている項目は質問をスキップしてください。
3. プリセットの値を「念のため確認」などせず、そのまま使用してください。

### 質問リスト（各項目はプリセットで設定されていない場合のみ聞く）

- **記事のテーマ**: どんなテーマで書きたいですか？

- **記事の種類**: 
   1) 単発記事
   2) シリーズもの
   番号でお答えください。

   （シリーズものを選択した場合の追加質問）
   - **予定記事数**: 何記事のシリーズにしますか？（例：3）
   - **各記事の概要**: 各記事で扱う内容を簡単に教えてください。

- **目標文字数**（一記事あたり）【プリセット対象：target_length】: 
   ※プリセットで指定されている場合はこの質問をスキップ
   1) 2,000〜3,000文字（短め）
   2) 4,000〜6,000文字（標準）
   3) 8,000文字以上（長め）
   4) その他（具体的な文字数）
   番号でお答えください。

- **対象読者**【プリセット対象：target_audience】: 
   ※プリセットで指定されている場合はこの質問をスキップ
   1) ビジネスパーソン全般
   2) 若手社会人・学生
   3) 経営者・マネージャー層
   4) エンジニア・技術者
   5) その他（具体的に）
   番号でお答えください。

- **記事の目的**【プリセット対象：purpose】: 
   ※プリセットで指定されている場合はこの質問をスキップ
   1) 読者に新しい知識を提供する
   2) 読者の行動変容を促す
   3) 読者の悩みを解決する
   4) 読者を楽しませる・共感を得る
   5) 意見や考えを共有する
   6) その他（具体的に）
   番号でお答えください。
   
   （詳細な目的があれば追加で教えてください）

- **トーン**【プリセット対象：tone】: 
   ※プリセットで指定されている場合はこの質問をスキップ
   1) フォーマル（かっちりした文体）
   2) カジュアル（親しみやすい文体）
   3) 技術的（専門用語を使った文体）
   4) その他
   番号でお答えください。

- **キーポイント**: 必ず含めたい要素はありますか？（なければ「なし」）

- **参考情報**: 参考にしたいURLや資料はありますか？（なければ「なし」）

- **スタイルガイド**【プリセット対象：style_guide】: 
   ※プリセットで指定されている場合はこの質問をスキップ
   
   Claude Codeが以下の手順で利用可能なスタイルガイドを確認します：
   
   1. `config/styles/`ディレクトリの.yamlファイルを検索
   2. ファイル名から拡張子を除いてスタイル名を抽出
   3. 選択肢として番号付きで表示
   
   Claude Codeが以下のように選択肢を表示します：
   0) default（標準）
   1) [確認されたスタイル名1]
   2) [確認されたスタイル名2]
   ...
   番号でお答えください。

- **特記事項**: 他に伝えておきたいことはありますか？（なければ「なし」）

### プリセットに関する重要な注意事項

**プリセットで設定された値は変更しない**：
- プリセットの値を「確認のため」見せたり、「こちらでよろしいですか？」と聞いたりしない
- プリセットの値をそのまま使用し、追加情報が必要な項目のみ質問する
- ユーザーが明示的に変更を要求した場合のみ、プリセットの値を上書きする

## ステップ5: プロジェクト名の自動生成

日付（YYYYMMDD形式）とテーマを組み合わせてプロジェクト名を生成します。
- 日付部分：ステップ2で取得した日時から日付部分のみを使用（YYYYMMDD）
- テーマ部分：テーマをslug形式で自動生成（例：「AIとの協働」→ `ai-collaboration`）
- 最終形式：`YYYYMMDD_slug-name`（例：`20250702_ai-collaboration`）

既存のプロジェクトと重複する場合は、`_2`、`_3`などの連番を付与します。

**注意**: 以降のコマンドで使用される`[プロジェクト名]`というプレースホルダーは、ここで生成したプロジェクト名に置き換えてください。

## ステップ6: ヒアリング内容の最終確認

インタビューが完了したら、収集した情報を整理して表示し、最終確認を行います：

```
📝 記事作成の内容確認

【基本情報】
- テーマ: [ヒアリングしたテーマ]
- 種類: [単発記事/シリーズ（○記事）]
- プロジェクト名: [生成されたプロジェクト名]

【記事設定】
- 目標文字数: [一記事あたり○文字]
- 対象読者: [対象読者]
- 記事の目的: [目的]
- トーン: [トーン]
- スタイルガイド: [スタイルガイド名]

【追加情報】
- キーポイント: [必須要素があれば表示]
- 参考情報: [参考URLがあれば表示]
- 特記事項: [特記事項があれば表示]

（シリーズの場合）
【記事構成】
- 第1回: [概要]
- 第2回: [概要]
...

これでよろしいですか？（yes/no）
```

**重要**: 
- ユーザーが「no」と答えた場合は、修正したい項目を聞いて対応する
- ユーザーが「yes」と答えた場合のみ、次のステップに進む

## ステップ7: ヒアリング結果の保存

インタビューが完了したら、以下の形式でbrief.yamlを作成してください：

```yaml
theme: "[ヒアリングしたテーマ]"
type: "single" または "series"
target_length: [一記事あたりの目標文字数]
articles_count: [記事数（単発の場合は1）]
total_length: [target_length × articles_count]
target_audience: "[対象読者]"
purpose: "[記事の目的]"
tone: "formal" | "casual" | "technical" | "other"
style_guide: "[スタイルガイド名]"
keywords:
  - "[キーワード1]"
  - "[キーワード2]"
requirements:
  - "[必須要素1]"
  - "[必須要素2]"
references:
  - "[参考URL1]"
  - "[参考URL2]"
interview_notes: |
  [インタビューで得られた詳細情報や特記事項]
  シリーズの場合は各記事の概要も含む
created_at: "[上記で取得した日時]"
status: "planning"
```

保存先: `projects/[プロジェクト名]/brief.yaml`

## ステップ8: articlesディレクトリとarticles.yamlの作成

プロジェクトディレクトリにarticlesフォルダを作成し、articles.yamlを初期化します：

```bash
mkdir -p projects/[プロジェクト名]/articles
```

AIがテーマと要件から適切なタイトルを生成し、slug形式のIDも自動生成します。

### 単発記事の場合のarticles.yaml:
```yaml
articles:
  - id: "01_[AIが生成したslug形式ID]"
    title: "[AIが考えた記事タイトル]"
    target_length: [目標文字数]
    status: "planning"
```

### シリーズ記事の場合のarticles.yaml:
```yaml
series_title: "[AIが考えたシリーズ全体のタイトル]"
flow_notes: |
  [AIが整理した記事間の関係性や流れの説明]
articles:
  - id: "01_[AIが生成したslug形式ID]"
    title: "第1回：[AIが考えた記事タイトル]"
    target_length: [一記事あたりの目標文字数]
    status: "planning"
    dependencies: []
  - id: "02_[AIが生成したslug形式ID]"
    title: "第2回：[AIが考えた記事タイトル]"
    target_length: [一記事あたりの目標文字数]
    status: "planning"
    dependencies: ["01_[第1回のID]"]
  # 以下、記事数分繰り返し
```

保存先: `projects/[プロジェクト名]/articles.yaml`

# 実行後の状態
- プロジェクトディレクトリが作成される
- brief.yamlファイルが保存される
- articlesディレクトリが作成される
- articles.yamlが初期化される
- 次のステップ（research）の準備が整う

# 使用例
/step:interview

# 関連コマンド
- 前: なし（最初のステップ）
- 次: /step:research
- 関連: /new（フルワークフロー）